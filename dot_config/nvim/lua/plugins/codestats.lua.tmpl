return {
  {
    "YannickFricke/codestats.nvim",
    "nvim-lua/plenary.nvim",
    config = function()
      require("codestats-nvim").setup({
        {{ if eq .chezmoi.os "linux" -}}
          {{ if (.chezmoi.kernel.osrelease | lower | contains "microsoft") -}}
            token = "{{ range (onepassword "dr3bexab4wvloeqcpwrsoubi7e").fields -}}
            {{   if eq .label "SERV"  -}}
            {{     .value -}}
            {{   end -}}
            {{ end }}"
          {{ end -}}
        {{ else if eq .chezmoi.os "darwin" -}}
          {{ if eq .location "work" -}}
            token = "{{ range (onepassword "dr3bexab4wvloeqcpwrsoubi7e").fields -}}
            {{   if eq .label "Shine"  -}}
            {{     .value -}}
            {{   end -}}
            {{ end }}"
          {{ else -}}
            token = "{{ range (onepassword "dr3bexab4wvloeqcpwrsoubi7e").fields -}}
            {{   if eq .label "Macbook Pro"  -}}
            {{     .value -}}
            {{   end -}}
            {{ end }}"
          {{ end -}}
        {{ end -}}
      })
    end,
  },
}
